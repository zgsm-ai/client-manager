# client-manager API 功能介绍

## 系统配置管理 API

### 1. 通用配置项查询
- **路由**: `GET /configuration`
- **功能**: 根据类型和键名获取通用配置项
- **参数**: 
  - `namespace` (必需): 配置类型
  - `key` (必需): 配置键名
- **描述**: 用于获取系统中特定的配置信息，需要提供配置类型和键名两个参数

### 2. 配置项列表查询
- **路由**: `GET /configurations`
- **功能**: 列举所有配置项，支持分页和搜索
- **参数**: 支持分页参数和搜索条件
- **描述**: 获取系统中的所有配置项列表，可以进行分页和条件筛选

### 3. 命名空间配置查询
- **路由**: `GET /configurations/<namespace>`
- **功能**: 列举指定命名空间下的配置项
- **参数**: 
  - `namespace` (路径参数): 命名空间
- **描述**: 获取特定命名空间下的所有配置项

### 4. 特定配置项获取
- **路由**: `GET /configurations/<namespace>/<key>`
- **功能**: 获取指定命名空间下特定键的配置值
- **参数**: 
  - `namespace` (路径参数): 命名空间
  - `key` (路径参数): 配置键
- **描述**: 通过命名空间和键唯一标识获取配置项的值，支持缓存

## 用户反馈 API

### 1. 代码补全反馈
- **路由**: `POST /feedbacks/completion`
- **功能**: 反馈用户在代码补全中接受的代码片段
- **数据来源**: IDE插件
- **描述**: 记录用户在代码补全功能中接受的代码，用于改进补全算法

### 2. 批量补全反馈
- **路由**: `POST /feedbacks/completions`
- **功能**: 反馈一组补全的结果
- **数据来源**: IDE插件
- **描述**: 批量反馈补全结果

### 3. 代码复制反馈
- **路由**: `POST /feedbacks/copy_code`
- **功能**: 反馈用户在与AI对话过程中复制了代码
- **数据来源**: IDE插件
- **描述**: 记录用户复制代码的行为，用于了解AI生成代码的实用性

### 4. 评价反馈
- **路由**: `POST /feedbacks/evaluate`
- **功能**: 反馈用户对AI回复的评价（点赞/点踩）
- **参数**: 
  - `conversation_id`: 对话ID
  - 评价类型（like/dislike）
- **描述**: 收集用户对AI回复质量的评价

### 5. 代码使用反馈
- **路由**: `POST /feedbacks/use_code`
- **功能**: 反馈用户通过ctrl+c、copy、accept、diff等操作使用代码
- **参数**: `conversation_id`: 对话ID
- **描述**: 记录用户使用AI生成代码的各种操作

### 6. 问题反馈
- **路由**: `POST /feedbacks/issue`
- **功能**: 反馈用户遇到的问题
- **数据包含**: 问题描述、问题类型、截图、附件、联系电话
- **描述**: 收集用户使用过程中遇到的问题和反馈

### 7. 错误反馈
- **路由**: `POST /feedbacks/error`
- **功能**: 反馈客户端累积错误的统计结果
- **数据来源**: IDE插件
- **描述**: 收集客户端错误统计信息

## 日志记录 API

### 1. 上报日志记录
- **路由**: `POST /logs`
- **功能**: 上报某个客户端的日志
- **数据来源**: 客户端上报进程
- **数据包含**: 客户端ID，用户ID，模块名，日志起止标志，日志内容。
- **描述**: 记录补全API的调用结果，用于性能分析和算法改进

## 总体架构特点

1. **模块化设计**: 按功能模块划分不同的控制器，职责清晰
2. **权限控制**: 实现了基于角色和创建者的权限控制
3. **数据验证**: 统一的请求参数验证机制
4. **响应格式**: 统一的API响应格式
5. **反馈收集**: 完善的用户反馈机制，用于产品改进
6. **日志记录**: 详细的操作日志记录，便于问题追踪和分析

这套API系统主要面向客户端，用于系统向客户端分发配置，采集反馈，收集日志等。